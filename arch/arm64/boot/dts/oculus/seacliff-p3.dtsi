// SPDX-License-Identifier: GPL-2.0

#include "seacliff-non-pop.dtsi"

&cm7120 {
	cm7120,firmware-name = "CM7120_TDM.bin";
};

&cm7120_snd {
	qcom,model = "kona-cm7120-tdm-snd-card";
	qcom,tdm-audio-intf = <1>;
	qcom,tdm-max-slots = <4>;
};

&pm8150_vadc {
	usbc_therm@4d {
		reg = <ADC_AMUX_THM1_PU2>;
		label = "usbc_therm";
		qcom,ratiometric;
		qcom,hw-settle-time = <200>;
		qcom,pre-scaling = <1 1>;
	};
};

&pm8150_adc_tm {
	usbc_therm@4d {
		reg = <ADC_AMUX_THM1_PU2>;
		qcom,ratiometric;
		qcom,hw-settle-time = <200>;
	};
};

&pm8150a_l4 {
	status = "ok";
};

&pm8150a_l5 {
	/* Nautilus, Safetyboss 1.9 */
	status = "ok";
	qcom,init-voltage = <1900000>;
	qcom,init-mode = <4>;  /* RPMH_REGULATOR_MODE_HPM */
	regulator-always-on;
};

&pm8150a_l7 {
	status = "disabled";
};

&pm8150_l13 {
	/delete-property/ regulator-always-on;
};

&pri_mi2s_gpios {
	pinctrl-0 = <&pri_tdm_clk_active
		&pri_tdm_din_active
		&pri_tdm_dout_active
		&pri_tdm_sync_active>;
	pinctrl-1 = <&pri_tdm_clk_sleep
		&pri_tdm_din_sleep
		&pri_tdm_dout_sleep
		&pri_tdm_sync_sleep>;
};

&tdm_pri_rx {
	qcom,msm-cpudai-tdm-lane-mask = /bits/ 16 <1>;
	qcom,msm-cpudai-tdm-sync-mode = <0>;
	qcom,msm-cpudai-tdm-invert-sync = <0>;
	qcom,msm-cpudai-tdm-data-delay = <0>;
};

&tdm_pri_tx {
	qcom,msm-cpudai-tdm-lane-mask = /bits/ 16 <2>;
	qcom,msm-cpudai-tdm-sync-mode = <0>;
	qcom,msm-cpudai-tdm-invert-sync = <0>;
	qcom,msm-cpudai-tdm-data-delay = <0>;
};

&thermal_zones {
	usbc-usr {
		polling-delay-passive = <0>;
		polling-delay = <0>;
		thermal-governor = "user_space";
		thermal-sensors = <&pm8150_adc_tm ADC_AMUX_THM1_PU2>;
		trips {
			active-config0 {
				temperature = <125000>;
				hysteresis = <1000>;
				type = "passive";
			};
		};
	};
};

&vendor {
	fpga_aggregator: oculus,fpga {
		/* TODO(Txxx): Enable when hardware becomes available */
		status = "disabled";
		compatible = "oculus,fpga";
		vcciox-supply = <&pm8150a_l4>;
		vcc-supply = <&pm8150a_l4>;
		vccaux-supply = <&pm8150_l13>;
	};
};
